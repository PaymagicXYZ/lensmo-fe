import{r as l}from"./chunks/index.12d2f6c3.js";import{u as A,p as S,a as y,e as C,b as B,c as D,d as F,W}from"./chunks/Web3Wrapper.d594cc84.js";import{u as L,S as E,B as P,g as R}from"./chunks/getWallet.791fb7ea.js";import{j as e}from"./chunks/jsx-runtime.2da8e926.js";/* empty css                     */import"./chunks/index.34b2e11a.js";import"./chunks/supabaseClient.c76733dd.js";const I={Polygon:"0xeA1da800c794228DcD8DA1e4A8F824F7F52999FB"},O=t=>{const{write:r,data:c,isLoading:i,isSuccess:o}=B(t.config);return i?e.exports.jsx("div",{children:"Executing transaction."}):o?e.exports.jsxs("div",{children:["Transaction: ",JSON.stringify(c)]}):e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsx("button",{className:"btn btn-primary",disabled:!r,onClick:()=>r?.(),children:"Confirm"}),t.error&&e.exports.jsxs("div",{className:"collapse",children:[e.exports.jsx("input",{type:"checkbox"}),e.exports.jsx("div",{className:"mt-8 collapse-title alert alert-warning shadow-lg",children:e.exports.jsxs("div",{children:[e.exports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e.exports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.exports.jsx("span",{children:"Warning: Unable to proceed with this transaction"})]})}),e.exports.jsx("div",{className:"collapse-content",children:e.exports.jsx("p",{children:t.error.message})})]})]})},J=t=>{const{data:r,isError:c,isLoading:i}=A({address:t.token});if(!c&&!i&&r){const o=S(t.amount,Number(r.decimals)),{config:d,error:p}=y({addressOrName:t.token,contractInterface:C,functionName:"approve",args:[t.spender,o]});return e.exports.jsx(O,{config:d,error:p})}else return e.exports.jsx("div",{children:"Loading..."})},U=()=>{const{chain:t}=D(),{address:r,isConnecting:c,isDisconnected:i}=F(),[o,d]=l.exports.useState("add"),[p,b]=l.exports.useState(!1),[a,u]=l.exports.useState([]),[m,v]=l.exports.useState(0),h=t&&I[t.name],j=[...t&&r?L(t,r):[]],k=n=>{n.preventDefault();const s=n.target,x=s[0].value,w=s[1].value;u([...a,{user:x,amount:w}]),s[0].value="",s[1].value=""},N=n=>{const s=document.getElementById("bulkInput");u(a.concat(JSON.parse(s.value))),s.value=""},[g,f]=l.exports.useState({to:[],value:[]}),T=async()=>{const n=Promise.all(a.map(async s=>({to:await R(s.user),value:s.amount})));f({to:(await n).map(s=>s.to),value:(await n).map(s=>s.value)})};return l.exports.useEffect(()=>{const n=a.reduce((s,x)=>s+Number(x.amount),0);v(n)},[a]),e.exports.jsxs("div",{className:"card w-full bg-base-100 shadow-xl",children:[e.exports.jsxs("div",{className:"card-body",children:[e.exports.jsx("h2",{className:"card-title",children:"Airdrop Token"}),c&&e.exports.jsx("div",{children:"Connecting..."}),i&&e.exports.jsx("div",{children:"Please connect your wallet to continue."}),r&&e.exports.jsxs("div",{children:[e.exports.jsx("h2",{children:"Select Your Token"}),e.exports.jsx(E,{token:o,setToken:d,tokenOptions:j,hideAmount:!0}),o!=="add"&&e.exports.jsx("span",{className:"label-text text-gray-400",children:e.exports.jsx(P,{address:r,token:o})}),e.exports.jsx("h2",{children:"Recipients"}),e.exports.jsxs("form",{onSubmit:k,children:[e.exports.jsxs("label",{className:"input-group",children:[e.exports.jsx("span",{children:"User"}),e.exports.jsx("input",{type:"text",placeholder:"platform:username",className:"input input-bordered"})]}),e.exports.jsxs("label",{className:"input-group",children:[e.exports.jsx("span",{children:"Amount"}),e.exports.jsx("input",{type:"number",placeholder:"enter your amount",className:"input input-bordered"})]}),e.exports.jsx("button",{type:"submit",className:"btn btn-primary",children:"Add"})]}),a&&a.map((n,s)=>e.exports.jsxs("div",{children:[e.exports.jsx("span",{style:{color:"red",cursor:"pointer"},onClick:()=>{delete a[s],u(a.filter(x=>x!==void 0))},children:"\xD7"}),"Recipient",s+1,":",e.exports.jsx("p",{children:JSON.stringify(n)},s)," "]},s)),e.exports.jsxs("p",{onClick:()=>{b(!p)},children:[p?e.exports.jsx("span",{children:"\u2193"}):e.exports.jsx("span",{children:"\u2192"})," Bulk Add"]}),p&&e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsx("textarea",{id:"bulkInput",className:"textarea h-24 textarea-bordered"}),e.exports.jsx("a",{onClick:N,className:"btn btn-primary",children:"Bulk Add"})]})]})]}),o!=="add"&&e.exports.jsxs("a",{onClick:T,className:"btn btn-primary",children:["Approve ",m," ",j.filter(n=>n.contractAddress==o)[0].token," for airdrop"]}),g.to.length>0&&h&&e.exports.jsx(J,{token:o,spender:h,amount:String(m)})]})},M=()=>e.exports.jsx("div",{children:"NFT"}),G=()=>{const[t,r]=l.exports.useState("Token"),c=i=>{i.preventDefault(),r(i.target.innerHTML)};return e.exports.jsxs("div",{className:"flex flex-col",children:[e.exports.jsxs("div",{className:"tabs w-full",children:[e.exports.jsx("a",{className:`tab tab-bordered w-1/2 ${t==="Token"&&"tab-active"}`,onClick:c,children:"Token"}),e.exports.jsx("a",{className:`tab tab-bordered w-1/2 ${t==="NFT"&&"tab-active"}`,onClick:c,children:"NFT"})]}),e.exports.jsxs(W,{children:[t==="Token"&&e.exports.jsx(U,{}),t==="NFT"&&e.exports.jsx(M,{})]})]})};export{G as AirDropTabs};
