import{r as c}from"./chunks/index.12d2f6c3.js";import{u as B,p as L,l as W,a as C,e as $,m as P,n as _,b as O,W as I,d as y,c as F}from"./chunks/Web3Wrapper.d594cc84.js";import{u as M,S as U,B as q,g as S,I as w}from"./chunks/getWallet.791fb7ea.js";import{j as e}from"./chunks/jsx-runtime.2da8e926.js";/* empty css                     */import"./chunks/index.34b2e11a.js";import"./chunks/supabaseClient.c76733dd.js";const A={Polygon:[{token:"MATIC",tokenImg:"https://polygon.technology/_nuxt/img/h-polygon.9bc1414.svg",contractAddress:"native"},{token:"USDT",tokenImg:"https://www.coinopsy.com/media/img/quality_logo/tether-usdt.png",contractAddress:"0xc2132d05d31c914a87c6611c10748aeb04b58e8f"},{token:"USDC",tokenImg:"https://www.coinopsy.com/media/img/quality_logo/usd-coin-usdc.png",contractAddress:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"},{token:"DAI",tokenImg:"https://www.coinopsy.com/media/img/quality_logo/Dai.png",contractAddress:"0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063"},{token:"WETH",tokenImg:"https://polygonscan.com/token/images/WETH_32.png",contractAddress:"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619"},{token:"BNB",tokenImg:"https://polygonscan.com/token/images/bnb_28_2.png",contractAddress:"0x3BA4c387f786bFEE076A58914F5Bd38d668B42c3"}]},T=t=>{let n;if(t.native){const{data:s,isLoading:o,isSuccess:l,sendTransaction:a}=_(t.config);n=a}else{const{write:s}=O(t.config);n=s}return e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsx("button",{className:"btn btn-primary",disabled:!n,onClick:()=>n?.(),children:"Confirm"}),t.error&&e.exports.jsxs("div",{className:"collapse",children:[e.exports.jsx("input",{type:"checkbox"}),e.exports.jsx("div",{className:"mt-8 collapse-title alert alert-warning shadow-lg",children:e.exports.jsxs("div",{children:[e.exports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e.exports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.exports.jsx("span",{children:"Warning: Unable to proceed with this transaction"})]})}),e.exports.jsx("div",{className:"collapse-content",children:e.exports.jsx("p",{children:t.error.message})})]})]})},R=t=>{const{data:n,isError:s,isLoading:o}=B({address:t.token});if(!s&&!o&&n){const l=L(t.amount,Number(n.decimals));if(t.token==="native"){const{config:a,error:d}=W({request:{to:t.to,value:l}});return e.exports.jsx(T,{config:a,error:d})}else{const{config:a,error:d}=C({addressOrName:t.token,contractInterface:$,functionName:"transfer",args:[t.to,l]});return e.exports.jsx(T,{config:a,error:d})}}else return e.exports.jsx("div",{children:"Loading..."})},H=t=>{const{config:n,error:s}=C({addressOrName:t.contract,contractInterface:P,functionName:"transferFrom",args:[t.from,t.to,t.id]});return e.exports.jsx(T,{config:n,error:s})},G=()=>{const{address:t,isConnecting:n,isDisconnected:s}=y(),{chain:o}=F(),[l,a]=c.exports.useState(o&&Object.keys(A).includes(o.name)?A[o.name]:[]),[d,i]=c.exports.useState(""),[h,u]=c.exports.useState("0"),[p,v]=c.exports.useState("native"),j=f=>{const k=f.target.parentElement[1].value;u(k);const b=document.getElementById("username").textContent?.trim()||"";S(b).then(N=>{i(N)})},g=o&&t?M(o,t):[];return c.exports.useEffect(()=>{g.length>0&&a([...l,{token:"My Tokens",tokenImg:"",contractAddress:""},...g])},[g]),e.exports.jsxs(e.exports.Fragment,{children:[n&&e.exports.jsx("div",{children:"Connecting..."}),s&&e.exports.jsx("div",{children:"Please connect your wallet to continue."}),t&&e.exports.jsxs("form",{className:"form-control",children:[e.exports.jsx("label",{className:"label",children:e.exports.jsx("span",{className:"label-text",children:"Asset"})}),e.exports.jsx(U,{tokenOptions:l,token:p,setToken:v}),p&&p!="add"&&e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsx("span",{className:"label-text text-gray-400",children:e.exports.jsx(q,{address:t,token:p})}),d?e.exports.jsx(R,{token:p,to:d,amount:h}):e.exports.jsx("a",{className:"btn btn-primary",onClick:f=>j(f),children:"Send"})]})]})]})},K=()=>e.exports.jsx(I,{children:e.exports.jsx(G,{})}),X=t=>e.exports.jsx("div",{className:"flex flex-row flex-wrap",children:t.NFTList.map((n,s)=>e.exports.jsxs("div",{children:[e.exports.jsx("input",{name:"nftList",type:"radio",id:`nft-${s}`,value:s,className:"hidden peer"}),e.exports.jsx("label",{htmlFor:`nft-${s}`,className:"avatar border-8 inline-block cursor-pointer peer-hover:border-violet-400 peer-checked:border-violet-800",children:e.exports.jsx("div",{className:"w-24 rounded",children:e.exports.jsx("img",{src:n.smallPreviewImageUrl||"https://www.cloudwards.net/wp-content/uploads/2021/06/NFT-coin-800x551.jpg"})})})]},s))}),z={matic:"polygon-mainnet"},Y=()=>{const{address:t,isConnecting:n,isDisconnected:s}=y(),[o,l]=c.exports.useState(""),[a,d]=c.exports.useState([]),[i,h]=c.exports.useState({contract:"",tokenId:""}),{chain:u}=F(),p=r=>{const m=r.target.parentElement[2].value;h({contract:i.contract,tokenId:m});const E=document.getElementById("username").textContent?.trim()||"";S(E).then(D=>{l(D)})},j=`https://api.center.dev/v1/${u&&z[u.network]}/account/${t}/assets-owned?limit=12`;c.exports.useEffect(()=>{fetch(j,{method:"GET",headers:{"X-API-Key":"ckey_b2a03fc7e5834457b82017bcd36"}}).then(r=>{r.json().then(x=>{d(x.items)})})},[t,u]);const g=r=>{r.preventDefault();const m=r.target[0].value;new RegExp("^0x[a-fA-F0-9]{40}$").test(m)&&h({contract:m,tokenId:i.tokenId})},f=r=>{r.preventDefault();const x=a[Number(r.target.value)];h({contract:x.address,tokenId:x.tokenId})},[k,b]=c.exports.useState(0),N=()=>{const r=`${j}&offset=${k}`;fetch(r,{method:"GET",headers:{"X-API-Key":"ckey_b2a03fc7e5834457b82017bcd36"}}).then(x=>{x.json().then(m=>{d(a.concat(m.items)),b(k+12)})})};return e.exports.jsxs(e.exports.Fragment,{children:[n&&e.exports.jsx("div",{children:"Connecting..."}),s&&e.exports.jsx("div",{children:"Please connect your wallet to continue."}),t&&e.exports.jsxs("form",{className:"form-control",onSubmit:g,onChange:f,children:[e.exports.jsx("label",{className:"label",children:e.exports.jsx("span",{className:"label-text",children:"NFT Collection"})}),a.length>0&&e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsx(X,{NFTList:a}),e.exports.jsx("a",{onClick:N,className:"cursor-pointer",children:"Load more"})]}),e.exports.jsx(w,{label:"Enter Contract Address",placeholder:i.contract,rightIcon:e.exports.jsx("button",{type:"submit",children:"Add"})}),i.contract&&e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsx(w,{label:"Enter Your NFT ID",placeholder:i.tokenId}),o&&i.tokenId&&t?e.exports.jsx(H,{from:t,contract:i.contract,to:o,id:i.tokenId}):e.exports.jsx("a",{className:"btn btn-primary",onClick:r=>p(r),children:"Send"})]})]})]})},J=()=>e.exports.jsx(I,{children:e.exports.jsx(Y,{})}),oe=()=>{const[t,n]=c.exports.useState("Token"),s=o=>{o.preventDefault(),n(o.target.innerHTML)};return e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsxs("div",{className:"tabs w-full",children:[e.exports.jsx("a",{className:`tab tab-bordered w-1/2 ${t==="Token"&&"tab-active"}`,onClick:s,children:"Token"}),e.exports.jsx("a",{className:`tab tab-bordered w-1/2 ${t==="NFT"&&"tab-active"}`,onClick:s,children:"NFT"})]}),t==="Token"&&e.exports.jsx(K,{}),t==="NFT"&&e.exports.jsx(J,{})]})};export{oe as SendTabs};
