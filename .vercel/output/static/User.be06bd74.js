import{s as n}from"./chunks/supabaseClient.c76733dd.js";import{j as s}from"./chunks/jsx-runtime.2da8e926.js";import"./chunks/index.12d2f6c3.js";const l=e=>async()=>{await n.auth.signIn({provider:e})},a=e=>s.exports.jsxs("button",{className:"btn btn-active",onClick:l(e.provider),children:["Sign in with ",e.provider]}),c=["twitter","github","discord"],t=n.auth.user(),m=()=>{if(t)return s.exports.jsxs("h5",{children:["Logged in as ",t.email]})},d=e=>{e.preventDefault();const o=e.target.newOwnerAddress.value;x(o)},x=e=>{console.log("Claiming NFT for address: ",e);const r=n.auth.session(),o=r&&r.access_token;fetch("https://rvhpnxjvpgatvgaubbyt.functions.supabase.co/claim",{method:"POST",headers:{"Content-Type":"application/javascript",Authorization:`Bearer ${o}`,"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"authorization, x-client-info, apikey"},body:JSON.stringify({newOwnerAddress:e})}).then(i=>i.text()).then(i=>console.log(i)).catch(i=>console.log("error",i))},g=e=>(console.log(t),t?s.exports.jsxs("div",{children:[s.exports.jsxs("h5",{children:["Logged in as ",t.email]}),t.identities&&t.identities.filter(r=>r.provider===e.provider&&r.identity_data.name===e.userInfo.name).length>0?s.exports.jsxs("form",{onSubmit:d,children:["Eligible to claim",s.exports.jsx("input",{type:"text",name:"newOwnerAddress",placeholder:"Enter your wallet address",className:"input input-bordered w-full max-w-xs"}),s.exports.jsx("input",{className:"btn btn-primary",value:"Claim",type:"submit"})]}):s.exports.jsx("p",{children:"You are not eligible to claim this account"})]}):s.exports.jsx(a,{provider:e.provider})),v=()=>t?s.exports.jsxs("div",{children:[s.exports.jsxs("h2",{children:["Hi ",t.email]}),t.identities&&t.identities.map(e=>s.exports.jsxs("div",{children:[s.exports.jsx("div",{className:"avatar mx-auto",children:s.exports.jsx("div",{className:"w-24 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2",children:s.exports.jsx("img",{src:e.identity_data.avatar_url})})}),s.exports.jsx("h3",{children:e.provider}),s.exports.jsx("p",{children:e.identity_data.name})]},e.id)),s.exports.jsx("button",{onClick:()=>n.auth.signOut(),children:"Sign out"})]}):s.exports.jsxs("div",{className:"flex flex-col",children:[s.exports.jsx("h2",{children:"Please Sign In to claim"}),c.map((e,r)=>s.exports.jsx(a,{provider:e},r))]});export{m as LoggedInAs,v as UserInfo,g as VerifiedUser};
